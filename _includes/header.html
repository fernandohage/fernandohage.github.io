<header class="site-header">
  <div class="header-wrapper">
    <div class="site-branding">
      <h1 class="site-title">
        <a href="{{ '/' | relative_url }}">{% if page.lang == 'en' %}{{ site.en.title }}{% else %}{{ site.pt.title }}{% endif %}</a>
      </h1>
      <p class="site-tagline">{% if page.lang == 'en' %}{{ site.en.tagline }}{% else %}{{ site.pt.tagline }}{% endif %}</p>
    </div>

    <nav class="main-navigation">
      <ul class="nav-menu">
        
        <li class="menu-item has-dropdown">
          <a href="#" onclick="return false;">{% if page.lang == 'en' %}{{ site.data.en.strings.navigation.research }}{% else %}{{ site.data.pt.strings.navigation.research }}{% endif %}</a>
          <ul class="dropdown-menu">
            <li class="submenu-item">
              <a href="{{ '/artigos-publicacoes' | relative_url }}">{% if page.lang == 'en' %}{{ site.data.en.strings.navigation.publications }}{% else %}{{ site.data.pt.strings.navigation.publications }}{% endif %}</a>
            </li>
            <li class="submenu-item">
              <a href="{{ '/meulivro' | relative_url }}">{% if page.lang == 'en' %}{{ site.data.en.strings.navigation.book }}{% else %}{{ site.data.pt.strings.navigation.book }}{% endif %}</a>
            </li>
            <li class="submenu-item">
              <a href="{{ '/tese-de-doutorado' | relative_url }}">{% if page.lang == 'en' %}{{ site.data.en.strings.navigation.phd }}{% else %}{{ site.data.pt.strings.navigation.phd }}{% endif %}</a>
            </li>
            <li class="submenu-item has-dropdown">
              <a href="#" onclick="return false;">{% if page.lang == 'en' %}{{ site.data.en.strings.navigation.specials }}{% else %}{{ site.data.pt.strings.navigation.specials }}{% endif %}</a>
              <ul class="dropdown-menu level-2">
                <li class="submenu-item">
                  <a href="{{ '/tresseculosdemodas' | relative_url }}">{{ site.data[site.active_lang].strings.navigation.three_centuries }}</a>
                </li>
                <li class="submenu-item has-dropdown">
                  <a href="#" onclick="return false;">{{ site.data[site.active_lang].strings.navigation.library }}</a>
                  <ul class="dropdown-menu level-3">
                    <li class="submenu-item">
                      <a href="{{ '/livros-historia-moda-arte' | relative_url }}">{{ site.data[site.active_lang].strings.navigation.fashion_art }}</a>
                    </li>
                    <li class="submenu-item">
                      <a href="{{ '/livros-caricatura-ilustrados' | relative_url }}">{{ site.data[site.active_lang].strings.navigation.engravings }}</a>
                    </li>
                    <li class="submenu-item">
                      <a href="{{ '/revistas-francesas' | relative_url }}">{{ site.data[site.active_lang].strings.navigation.french_magazines }}</a>
                    </li>
                    <li class="submenu-item">
                      <a href="{{ '/revistas-brasileiras' | relative_url }}">{{ site.data[site.active_lang].strings.navigation.brazilian_magazines }}</a>
                    </li>
                    <li class="submenu-item">
                      <a href="{{ '/livros-brasileiros' | relative_url }}">{{ site.data[site.active_lang].strings.navigation.brazilian_books }}</a>
                    </li>
                    <li class="submenu-item">
                      <a href="{{ '/livros-textos-teatrais' | relative_url }}">{{ site.data[site.active_lang].strings.navigation.theatrical_texts }}</a>
                    </li>
                    <li class="submenu-item">
                      <a href="{{ '/livros-historia-francesa' | relative_url }}">{{ site.data[site.active_lang].strings.navigation.french_history }}</a>
                    </li>
                    <li class="submenu-item">
                      <a href="{{ '/livros-goncourt' | relative_url }}">{{ site.data[site.active_lang].strings.navigation.goncourt_books }}</a>
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        
        <li class="menu-item has-dropdown">
          <a href="#" onclick="return false;">{{ site.data[site.active_lang].strings.navigation.projects }}</a>
          <ul class="dropdown-menu">
            <li class="submenu-item">
              <a href="{{ '/diario-de-bordo' | relative_url }}">{{ site.data[site.active_lang].strings.navigation.diary }}</a>
            </li>
            <li class="submenu-item has-dropdown">
              <a href="#" onclick="return false;">{{ site.data[site.active_lang].strings.navigation.media }}</a>
              <ul class="dropdown-menu level-2">
                <li class="submenu-item">
                  <a href="{{ '/podcasts' | relative_url }}">{{ site.data[site.active_lang].strings.navigation.podcasts }}</a>
                </li>
                <li class="submenu-item">
                  <a href="{{ '/videos' | relative_url }}">{{ site.data[site.active_lang].strings.navigation.videos }}</a>
                </li>
              </ul>
            </li>
            <li class="submenu-item">
              <a href="{{ '/territorio-da-moda' | relative_url }}">{{ site.data[site.active_lang].strings.navigation.territory }}</a>
            </li>
            <li class="submenu-item">
              <a href="{{ '/caixa-de-criadores' | relative_url }}">{{ site.data[site.active_lang].strings.navigation.creators_box }}</a>
            </li>
          </ul>
        </li>
        
        <li class="menu-item has-dropdown">
          <a href="#" onclick="return false;">{{ site.data[site.active_lang].strings.navigation.info }}</a>
          <ul class="dropdown-menu">
            <li class="submenu-item">
              <a href="{{ '/curriculo-resumido' | relative_url }}">{{ site.data[site.active_lang].strings.navigation.curriculum }}</a>
            </li>
            <li class="submenu-item">
              <a href="{{ '/contato' | relative_url }}">{{ site.data[site.active_lang].strings.navigation.contact }}</a>
            </li>
          </ul>
        </li>
      </ul>
      
      <!-- Mobile menu toggle -->
      <div class="mobile-menu-toggle">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </nav>

    <!-- Language Switcher -->
    <div class="language-switcher">
    {% for language in site.languages %}
      {% if language == site.active_lang %}
        <span class="lang-link active">{{ language | upcase }}</span>
      {% else %}
        {% if language == site.default_lang %}
          <a href="{{site.url}}" class="lang-link" >{{ language | upcase }}</a>
        {% else %}
          <a href="{{site.url}}/{{site.baseurl}}/{{ language }}/{{ page.url }}" class="lang-link">{{ language | upcase }}</a>
        {% endif %}
      {% endif %}
    {% endfor %}
    </div>
  </div>
</header>

<script>
// Mobile menu functionality
document.addEventListener('DOMContentLoaded', function() {
  const mobileToggle = document.querySelector('.mobile-menu-toggle');
  const navMenu = document.querySelector('.nav-menu');
  const dropdownItems = document.querySelectorAll('.menu-item.has-dropdown');
  
  if (mobileToggle) {
    mobileToggle.addEventListener('click', function() {
      navMenu.classList.toggle('mobile-active');
    });
  }
  
  dropdownItems.forEach(item => {
    const link = item.querySelector('a');
    if (link && link.getAttribute('href') === '#') {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        if (window.innerWidth <= 768) {
          item.classList.toggle('mobile-dropdown-open');
        }
      });
    }
  });
  
  document.addEventListener('click', function(e) {
    if (!e.target.closest('.main-navigation')) {
      navMenu.classList.remove('mobile-active');
    }
  });
});
</script>
